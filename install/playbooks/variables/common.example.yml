# Common variables to the whole system

# System related
system:
  release: stretch
  ssl: letsencrypt

# Network related
network:
  domain: example.com
  hostname: mail.example.com

# Useful to debug / develop
debug: true

# Email related
mail:
  admin:
    name: "John Doe"
    email: admin@example.com
    user: "john"

# Options
options:
  accounts:
    login: true
  local_admin: true

# For automatic DNS update
# Your Gandi Key should be 24 characters long, e.g. zaNGbUVIvi1KbYb6PPMdiQLh
dns:
  gandi:
    handle: JD123-GANDI
    key: zaNGbUVIvi1KbYb6PPMdiQLh

# Password policy:
passwords:
  min_length: 8
  max_age: 31536000        # 365 days max
  max_failure: 5
  expire_warning: 259200   # 3 days
  require_nonalpha: true

# Once the system is in place, it is possible to use 'limit' for the rule, instead of any.
# It is also possible to use fail2ban, which is installed anyway
firewall:
  ssh:
    from: any
    rule: allow

###############################################################################
# Extra security values
security:
  auto_update: true
  app_armor: false
  aa_profiles:
    - nginx

###############################################################################
# Antispam features
rspamd:
  proxy:
    port: 11332
  normal:
    port: 11333
  controller:
    port: 11334
      
antispam:
  milter:
    name: rspamd
    port: '{{ rspamd.proxy.port }}'

# User storage quotas for email
quota:
  per_user: 1G
  listener:
    port: 11335

# DMARC validation parameters
dmarc:
  milter:
    port: 11336

###############################################################################
# Users
users:
- uid: john
  cn: John Doe
  uidNumber: 1001
  gidNumber: 1001
  first_name: John
  last_name: Doe
  group: users
  groups: mail
  shell: /bin/bash
  mail: 'john.doe@{{ network.domain }}'
  password: "xIlm*uu7"
- uid: jane
  cn: Jane Doe
  uidNumber: 1002
  gidNumber: 1001
  first_name: Jane
  last_name: Doe
  group: users
  groups: mail
  shell: /bin/bash
  mail: 'jane.doe@{{ network.domain }}'
  password: "Tlwril!8"

posix_groups:
- gid: mail_users
  description: Mail users
  gidNumber: 1001
  mail: 'users@{{ network.domain }}'
- gid: administrators
  description: Administrators
  gidNumber: 2000
  mail: 'admin@{{ network.domain }}'
