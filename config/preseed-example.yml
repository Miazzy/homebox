---
# Example file to create an ISO image installer with Debian preseed.

# 1. Setup SSH authentication:
# Copy your public key in "preseed/misc/root/.ssh/authorized_key".
# This key will be copied into the /root/.ssh/authorized_keys for you to connect to your linux server

# 2. Customisation:
# Copy this file to common.yml, and modify the values accordingly
# You can use a dedicated Linux machine as an ISO image builder, or use your workstation.
# Associated with libvirt, and snapshots, it can be used as a development environment for the mail server.

# 3. Build the ISO image
# Example of a command to run to build the ISO image
# ansible-playbook -v -i ../config/hosts.yml playbooks/build-cd.yml
# This will create the ISO images in /tmp folder. Use the DVD one for automatic installation.

# 4. Use a physical server or a VM to run the Debian installer.
# The whole installation should be automatic, with LVM and software RAID
# For LVM, there is a volume called "reserved" you can remove. This will let
# you resize the other volumes according to your needs.

# 5. See the documentation and the Ansible scripts into the install folder to install the mail server platform.

# Remember: http://imgs.xkcd.com/comics/security.png
# So, here some good passphrases are, if you are drugged:
# - Can I have some water, please?
# - I am tired, I want to sleep, now
# - I will not give you my password
# - etc...

# System configuration sample 1: Encrypted hard drive
# system:
#   hostname: mail
#   preseed: luks
#   version: 9.4
#   arch: amd64
#   passphrase: I will not give you my password
#   hw:
#     disks:
#       - name: vda
#         size: 500G

# System configuration sample 2: Software RAID + Luks
# system:
#   hostname: mail
#   preseed: raid-luks
#   version: 9.4
#   arch: amd64
#   passphrase: I will not give you my password
#   hw:
#     disks:
#       - name: vda
#         size: 500G
#       - name: vdb
#         size: 500G

# The proxy is optional. When specified, it is used to configure apt
network:
  main:
    domain: example.com
    proxy: 'http://proxy.example.com:3128/'  # Or just use 'false'
    iface: eth0

# Country and locales definition
country:
  code: uk

locale:
  id: en_GB
  language: en
  country: UK
  charset: UTF-8
  keymap: gb

# Repository specific values
repo:
  release: stretch
  main: ftp.uk.debian.org
  security: security.debian.org
  sections: main contrib non-free

time:
  zone: Europe/London
  utc: true
  ntp: true

# Accounts informations
# You can choose a strong password here,
# You can also delete the root password, lock the account, and connect to your machine
# only using SSH. In this case, set the second flag to true.
# Be careful, doing this would completely lock you if you loose network access to the machine
root:
  password: H0meb0x
  lock: false

# Where to put the ISO image once built. If You are doing development, you can copy it to
# the libvirt/images folder.
# You should have the right to write in ths folder.
# cdimage:
#   destination: '/var/lib/libvirt/images/'

# Or ready to be put on a USB stick / burned on a CD
cdimage:
  destination: '/tmp'

# Clean the build folder after the image is created
# This is mostly useful in a CI/CD pipeline
devel:
  clean: false
